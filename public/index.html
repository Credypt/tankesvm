<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="manifest" href="manifest.json" />
    
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <title>title</title>
    
        <meta name="description" content="Desc">
        <meta name="author" content="author">
    
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Jaldi:wght@400;700&display=swap" rel="stylesheet">
    
        <link as="image" href="assets/images/curry.jpg.jpg" />
    
        <link rel="stylesheet" href="styles.css">
    
        <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    </head>
<body>
<main class="content">

<div id="main_menu">
    <h1>Tankesvøm</h1>
    <h2>et imaginært stevne</h2>
    <button onclick="change_menu('selection_area');">>>>start>>></button>
</div>
<div id="selection_area">
    <button onclick="change_menu('intermission');">Fortsett</button>
</div>
<div id="intermission">
    <button onclick="change_menu('stop_area');">Forstår</button>
</div>
<div id="stop_area">
    <p id="timerDisplay" class="center"></p>
    <button onclick="change_menu('end_menu');">Ferdig med å svømme</button>
</div>
<div id="end_menu">
    <p id="timerFinal" class="center"></p>
    <button onclick="change_menu('selection_area');">Prøv igjen</button><br>
    <button onclick="change_menu('main_menu');">Hovedmeny</button>
</div>

</main>

<script type="text/javascript">
    
    let area = "main_menu";
    let delta = 0;
    let start = 0;
    
    function change_menu(menu) {
        document.getElementById(area).style.display = "none";
        document.getElementById(menu).style.display = "block";
        area = menu;
        if (area === "stop_area") {
            start_timer();
        }
        if (area === "end_menu") {
            let stElement = document.getElementById("strokeInput");
            let stroke = stElement.value;
            let tiElement = document.getElementById("timeInput");
            let initialTime = tiElement.value;
            console.log(stroke, initialTime);
            document.getElementById("initalStroke").innerHTML=stroke;
            document.getElementById("initalTime").innerHTML=initialTime;
        }
    }
    
    function start_timer() {
        start = Date.now();
        var timer = setInterval(function(){
            delta = Date.now() - start;
            update_timer(delta, "timerDisplay");
            if (area === "end_menu") {
                clearInterval(timer);
                update_timer(delta, "timerFinal");
            }
        }, 10);
    }
    function update_timer(delta, element) {
        let ms = Math.floor(delta / 10);
        let sec = Math.floor(ms / 100);
        let min = Math.floor(sec / 60);
        ms = ms % 100;
        sec = sec % 60;
        if (ms < 10) {
            ms = "0" + ms.toString();
        } else {
            ms = ms.toString();
        }
        if (sec < 10) {
            sec = "0" + sec.toString();
        } else {
            sec = sec.toString();
        }
        if (min < 10) {
            min = "0" + min.toString();
        } else {
            min = min.toString();
        }
        let timeCon = (min.toString() + "." + sec.toString() + "," + ms.toString());
        document.getElementById(element).innerHTML=timeCon;
    }
    </script>
    
    </body>
</html>